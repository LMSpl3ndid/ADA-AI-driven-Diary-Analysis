# Diary Analysis: AI 驱动的个人生活传记系统

这是一个基于 AI（DeepSeek API）的日记分析与年度总结工具。它能够深度扫描您的 Markdown 格式日记，通过多层级、双轨制的分析架构，为您生成既有宏观叙事感、又有极详尽细节的年度总结报告。

## 🌟 核心功能

- **多层级压缩分析**：
  - **Map (周分析)**：将每日琐碎记录提炼为具有情绪评分、关键事件和周度摘要的周报。
  - **Compress (月总结)**：基于周报，利用 `deepseek-reasoner` 模型进行逻辑整合，提炼每月的生活主线。
  - **Reduce (年度总结)**：最终生成一份万字级别的年度深度回顾。
- **双轨制生成策略 (Dual-Track)**：
  - **叙事篇**：侧重于人生故事、成长弧光与深度洞察，让总结读起来像一本自传。
  - **归档篇**：直接从原始周报提取细节，分类整理全年的【行旅足迹】、【书影音游】、【技术创造】与【个人成长】，确保“吃过的每一顿火锅、看过的每一部番剧”都不会被遗忘。
- **高性能并行处理**：采用多线程并发调用 API，处理全年的日记仅需几分钟。
- **自动化归档系统**：每次运行都会在 `Diary_report` 下生成带时间戳的文件夹，完整保存过程数据（CSV）与最终成果（Markdown）。

## 🚀 快速开始

### 1. 环境准备
确保您的系统中已安装 Python 3，并安装必要的依赖库：
```bash
pip install openai pandas
```

### 2. 配置项目
打开 `analysis_online.py`，修改以下配置：
- `VAULT_PATH`: 设置为您存放 Markdown 日记的根目录。
- `API_KEY`: 填入您的 DeepSeek API Key。

### 3. 运行分析
```bash
python3 analysis_online.py
```

## 📂 目录结构示例

```text
.
├── 2025/                  # 您的日记目录（按月分文件夹）
├── Diary_report/          # 自动生成的报告库
│   └── 20260105_120000/   # 某次运行的成果
│       ├── diary_analysis_2025_weekly.csv   # 全年周报明细
│       ├── diary_analysis_2025_monthly.csv  # 全年月报汇总
│       ├── 2025_年度总结_online.md          # 最终年度总结
│       └── New_prompt.md                    # 针对本次总结的评估与优化建议
├── analysis_online.py     # 核心分析脚本
└── README.md
```

## 🛠️ 技术栈
- **语言**: Python
- **AI 模型**: 
  - `deepseek-chat`: 用于大规模文本的初步提炼与长文叙事。
  - `deepseek-reasoner`: 用于月度逻辑整合与深度评估。
- **数据处理**: Pandas

## 📝 贡献建议
欢迎通过 Issue 或 Pull Request 提交改进建议，特别是针对分析 Prompt 的优化方案。

---
*人生没有正确答案，所以没有什么败北。通过记录与回望，我们终将找到属于自己的和弦。*
